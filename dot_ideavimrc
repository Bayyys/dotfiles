r -- Suggested options --

" Show a few lines of context around the cursor. Note that this makes the
" text scroll if you mouse-click near the start or end of the window.

" å®šä¹‰leaderé”®: ç©ºæ ¼é”®
let mapleader = " "


" Do incremental searching.
set incsearch   " å¼€å¯å¢é‡æœç´¢
set hlsearch    " è®¾ç½®é«˜äº® (é»˜è®¤å¼€å¯)
nnoremap <silent> <M-x> :nohlsearch<CR> " è®¾ç½®<M-x>å…³é—­é«˜äº®
set ignorecase  " æœç´¢æ—¶å¿½ç•¥å¤§å°å†™
set smartcase   " æœç´¢æ—¶å¦‚æœæœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œåˆ™åŒºåˆ†å¤§å°å†™
set showmode    " æ˜¾ç¤ºå½“å‰æ¨¡å¼
set scrolloff=5 " å…‰æ ‡è·ç¦»é¡¶éƒ¨å’Œåº•éƒ¨5è¡Œ
set clipboard+=unnamedplus " å…±äº«å‰ªè´´æ¿


" éœ€è¦å®‰è£…æ’ä»¶ IdeaVimExtension
set keep-english-in-normal-and-restore-in-insert  " Normalæ¨¡å¼ä¸‹ä¿æŒè‹±æ–‡è¾“å…¥æ³•

" å¿«é€Ÿè¿›å…¥vimæ¨¡å¼(é€€å‡ºinsertæ¨¡å¼)
inoremap jj <Esc>
inoremap jk <Esc>
inoremap kk <Esc>

" é€€å‡ºvisualæ¨¡å¼
vnoremap v <jEsc>

" ---- Which-Key ----
set which-key
set notimeout
set timeoutlen=300

" Don't use Ex mode, use Q for formatting.
map Q gq

""symotion-prefix)symotion-prefix) -- Map IDE actions to IdeaVim -- https://jb.gg/abva4t
let g:WhichKeyDesc_LeaderKeymap= "<leader> ğŸŒŸğŸŒŸğŸŒŸLeaderKeymapğŸŒŸğŸŒŸğŸŒŸ"  " è®¾ç½®leaderé”®çš„æè¿°
let g:WhichKeyDesc_CodeAndClose = "<leader>c CodeAndClose"  " è®¾ç½®leaderé”®çš„æè¿°

" ---symotion-prefix)symotion-prefix) Enable IdeaVim plugins https://jb.gg/ideavim-plugins
" æ’ä»¶
" EasyMotion plugin: å¿«é€Ÿè·³è½¬(,,s)
Plug 'easymotion/vim-easymotion'
set easymotion
" Seank: è¡Œå†…è·³è½¬(s)
Plug 'justinmk/vim-sneak'
" Surround plugin: ä¿®æ”¹ç¯ç»•ç¬¦å·(ysiw)
Plug 'tpope/vim-surround'
" Multiple-cursors
" Commentary plugin: å¿«é€Ÿæ³¨é‡Š(ä½¿ç”¨gc)
Plug 'tpope/vim-commentary'
" Activate plugin
set anyobject


" æ˜¾ç¤ºæ‰€æœ‰å¿«æ·é”®symotion-prefix)symotion-prefix) vimæ¨¡å¼ä¸‹ :actionlist
nnoremap \\h :actionlist<CR>
" è®¾ç½®æŒ‰é”®\o ç»‘å®šä¸º source ~/.ideavimrc(reload)
nnoremap \\o :source ~/.ideavimrc<CR>

" ç¼–è¾‘å™¨è·³è½¬
" è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯æˆ–è­¦å‘Š
nmap ge <action>(GotoNextError)
nmap ]d <action>(GotoNextError)
nmap gE <action>(GotoPreviousError)
nmap [d <action>(GotoPreviousError)
" è·³è½¬åˆ°ä¸Šä¸€ä¸ªæ–¹æ³•çš„å£°æ˜å¤„
nmap gm <action>(MethodUp)
" è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜å¤„
nmap gM <action>(MethodDown)
" è·³è½¬åˆ°å½“å‰æˆ–æŠ½è±¡ç±»çš„å®ç°å¤„
nmap gi <action>(GotoImplementation)
" è·³è½¬åˆ°å½“å‰ç±»çš„å£°æ˜å¤„
nmap gI <action>(GotoDeclaration)

" --- æ ‡ç­¾é¡µè·³è½¬ ---
nmap <S-L> <action>(NextTab)
nmap <S-H> <action>(PreviousTab)

" === c ===
let g:WhichKeyDesc_Format = "<leader>c Format"

" æ ¼å¼åŒ–ä»£ç 
let g:WhichKeyDesc_Format_ReformatCode = "<leader>ca ReformatCode"
nmap <leader>ca <action>(ReformatCode)
" --- å¿«é€Ÿæ ¼å¼åŒ–ä»£ç 
map ca <Action>(ReformatCode)
" æ ¼å¼åŒ–imports
let g:WhichKeyDesc_Format_OptimizeImports = "<leader>co OptimizeImports"
nmap <leader>co <action>(OptimizeImports)
" --- å¿«é€Ÿæ ¼å¼åŒ–imports
map co <Action>(OptimizeImports)
" å…³é—­æ‰€æœ‰ç¼–è¾‘å™¨
let g:WhichKeyDesc_Format_CloseAllEditors = "<leader>cq CloseAllEditors"
nmap <leader>cq <action>(CloseAllEditors)
nmap \\cq <action>(CloseAllEditors)
" å…³é—­é™¤å½“å‰ç¼–è¾‘å™¨å¤–çš„æ‰€æœ‰ç¼–è¾‘å™¨
let g:WhichKeyDesc_Format_CloseOthersEditors = "<leader>cw CloseAllEditorsButActive"
nmap \\cw <action>(CloseAllEditorsButActive)
" å…³é—­å½“å‰ç¼–è¾‘å™¨
let g:WhichKeyDesc_Format_CloseEditor = "<leader>cc CloseEditor"
nmap \\cc <action>(CloseEditor)

" === d ===
"åœ¨å¯è§†æ¨¡å¼ä¸­ï¼šåˆ é™¤é€‰æ‹©çš„æ–‡æœ¬å¹¶å¤åˆ¶åˆ°å‰ªåˆ‡æ¿
let g:WhichKeyDesc_DebugOrDelete_DeleteAndCopyToClipboard = "<leader>dd DeleteAndCopyClipboard"
vmap <leader>dd "+d

" åˆ‡æ¢æ–­ç‚¹
let g:WhichKeyDesc_DebugOrDelete_ToggleBreakpoint = "<leader>db ToggleBreakpoint"
nmap <leader>db <action>(ToggleLineBreakpoint)
nmap \\d <action>(ToggleLineBreakpoint)
nmap \\fd <action>(Debugger.RemoveAllBreakpointsInFile)
nmap \\0d <action>(Debugger.RemoveAllBreakpoints)


" === e ===
" --- æ¿€æ´»é¡¹ç›®å·¥å…·çª—å£ ---
let g:WhichKeyDesc_ToggleExplorerOrExtract = "<leader>e ToggleExplorer"
nmap <leader>e <action>(ActivateProjectToolWindow)

" === f ===
let g:WhichKeyDesc_FindOrFormat = "<leader>f FindOrFormat"
" å¤åˆ¶å½“å‰æ–‡ä»¶ç»å¯¹è·¯å¾„
let g:WhichKeyDesc_FindOrFormat_CopyAbsolutePath = "<leader>fa CopyAbsolutePath"
nmap <leader>fa <action>CopyAbsolutePath<CR>
" ä»“åº“æ ¹è·¯å¾„
let g:WhichKeyDesc_FindOrFormat_CopyPathFromRepositoryRootProvider = "<leader>fa CopyPathFromRepositoryRootProvider"
nmap <leader>ff <action>CopyPathFromRepositoryRootProvider<CR>
" å¤åˆ¶å½“å‰æ–‡ä»¶å
let g:WhichKeyDesc_FindOrFormat_CopyFileName = "<leader>fa CopyFileName"
nmap <leader>fn <action>CopyFileName<CR>

" === h ===
let g:WhichKeyDesc_PreviousTab = "<leader>h PreviousTab"
nmap <leader>h :action PreviousTab<CR>

" === l ===
let g:WhichKeyDesc_NextTab = "<leader>l NextTab"
nmap <leader>l :action NextTab<CR>
" é¡¹ç›®ç›®å½•ä¸­å®šä½åˆ°æ‰“å¼€çš„æ–‡ä»¶
let g:WhichKeyDesc_OpenFileInProjectView = "<leader>lo OpenFileInProjectView
nmap \\l <action>(OpenFileInProjectView)

" === j ===
"æ™®é€šæ¨¡å¼ä¸‹åœ¨è¡Œå°¾ä¸€ä¸ªåˆ†å·ï¼Œç„¶åè¿›å…¥æ’å…¥æ¨¡å¼å¹¶åœ¨å½“å‰è¡Œçš„ä¸‹æ–¹æ–°å»ºä¸€è¡Œ
let g:WhichKeyDesc_InsertSemicolon = "<leader>j InsertSemicolon"
nmap <leader>j A;<ESC>o

" === n ===
" å…³é—­ä¾§è¾¹æ +åº•éƒ¨å·¥å…·æ 
nmap <C-n> :action HideAllWindows<CR>

" === p ===
"ä»å‰ªåˆ‡æ¿ç²˜è´´åˆ°ä¸‹é¢è¡Œ
let g:WhichKeyDesc_PasteClipboardDown = "<leader>p PasteClipboardDown"
nmap <leader>p "+p
"ä»å‰ªåˆ‡æ¿ç²˜è´´åˆ°ä¸Šé¢è¡Œ
let g:WhichKeyDesc_PasteClipboardUp = "<leader>P PasteClipboardUp"
nmap <leader>P "+P

" === q ===
let g:WhichKeyDesc_ExpandOrToggle = "<leader>q ExpandOrToggle"
" å±•å¼€æ‰€æœ‰
let g:WhichKeyDesc_ExpandOrToggle_ExpandAllRegins = "<leader>q0 ExpandAllRegins"
nmap <leader>q0 :action ExpandAllRegions<CR>
nmap q0 :action ExpandAllRegions<CR>
" å®Œå…¨æŠ˜å æ‰€æœ‰ä»£ç å—
let g:WhichKeyDesc_ExpandOrToggle_CollapseAll = "<leader>q1 CollapseAll"
nmap <leader>q1 :action CollapseAllRegions<CR>
nmap q1 :action CollapseAllRegions<CR>
" æŠ˜å åˆ°çº§åˆ«1
let g:WhichKeyDesc_ExpandOrToggle_CollapseToLevel1 = "<leader>q2 CollapseToLevel1"
nmap <leader>q2 :action CollapseAllRegions<CR>:action ExpandAllToLevel1<CR>
nmap q2 :action CollapseAllRegions<CR>:action ExpandAllToLevel1<CR>
" æŠ˜å åˆ°çº§åˆ«2
let g:WhichKeyDesc_ExpandOrToggle_CollapseToLevel2 = "<leader>q3 CollapseToLevel2"
nmap <leader>q3 :action CollapseAllRegions<CR>:action ExpandAllToLevel2<CR>
nmap q3 :action CollapseAllRegions<CR>:action ExpandAllToLevel2<CR>
" æŠ˜å åˆ°çº§åˆ«3
let g:WhichKeyDesc_ExpandOrToggle_CollapseToLevel3 = "<leader>q4 CollapseToLevel3"
nmap <leader>q4 :action CollapseAllRegions<CR>:action ExpandAllToLevel3<CR>
nmap q4 :action CollapseAllRegions<CR>:action ExpandAllToLevel3<CR>
" é€’å½’æŠ˜å /å±•å¼€
let g:WhichKeyDesc_ExpandOrToggle_ExpandCollapseToggleAction = "<leader>qq ExpandCollapseToggleAction"
nmap <leader>qq :action ExpandCollapseToggleAction<CR>
nnoremap qq :action CollapseAllRegions<CR>:action ExpandRegionRecursively<CR>
" ä»…å±•å¼€å½“å‰èŠ‚ç‚¹
nmap qe :action ExpandCollapseToggleAction<CR>

" === r ===
let g:WhichKeyDesc_RunOrRe = "<leader>r RunOrRe"
" è¿è¡Œå½“å‰ç¼–è¾‘å™¨ä¸­çš„æ–‡ä»¶æˆ–ç±»(Shift + F10)
let g:WhichKeyDesc_RunOrRe_RunCalss = "<leader>rr RunClass"
nmap <leader>rr :action RunClass<CR>
nmap \\rr <Action>(RunClass)
" é‡æ–°è¿è¡Œæœ€è¿‘ä¸€æ¬¡è¿è¡Œçš„ç¨‹åºæˆ–æµ‹è¯•(Ctrl+Shift + F10)
let g:WhichKeyDesc_RunOrRe_ReRun = "<leader>rl ReRun"
nmap <leader>rl <action>(Rerun)
" è°ƒè¯•å¯åŠ¨å·¥ç¨‹
let g:WhichKeyDesc_RunOrRe_Debug = "<leader>rd Debug"
nmap <leader>rd <action>(Rerun)
" é‡å‘½åå˜é‡
let g:WhichKeyDesc_RunOrRe_Rename = "<leader>rn Rename"
nmap <leader>rn :action RenameElement<CR>
nmap \\rn :action RenameElement<CR>

" === v ===
let g:WhichKeyDesc_SplitTab = "<leader>v SplitTab"
nmap \\vs <action>(SplitTab)

" --- æ‰“å¼€ç»ˆç«¯
map <C-t> :action ActivateTerminalToolWindow<CR>
" === åœ¨åˆ†å±çŠ¶æ€ä¸‹ä½¿ç”¨ Shift+å·¦å³é”®åˆ‡æ¢ç¼–è¾‘å™¨ ===
" Shift+å·¦é”®ï¼šåˆ‡æ¢åˆ°å·¦ä¾§ç¼–è¾‘å™¨
nnoremap <C-h> <C-w>h
" Shift+å³é”®ï¼šåˆ‡æ¢åˆ°å³ä¾§ç¼–è¾‘å™¨
nnoremap <C-l> <C-w>l
